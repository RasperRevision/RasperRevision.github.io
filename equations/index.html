<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Recall the relationships between variables in these equations">
  <title>Equations - Rasper Revision</title>

  <!-- BREADCRUMB LIST -->
  
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "BreadcrumbList",
    "itemListElement": [
      {
        "@type": "ListItem",
        "position": 1,
        "name": "Equations",
        "item": "https://rasperrevision.github.io/equations"
      },
      {
        "@type": "ListItem",
        "position": 2,
        "name": "Physics Equations"
      }
    ]
  }
  </script>

  <!-- FAVICON -->
  <link rel="icon" type="image/png" href="/assets/logo/icon_dark.svg">

  <!-- BOOTSTRAP STYLES -->
  <link href="/node_modules/bootstrap/dist/css/bootstrap.min.css" rel="stylesheet">

  <!-- BOOTSTRAP SCRIPTS-->
  <script src="/node_modules/bootstrap/dist/js/bootstrap.bundle.min.js"></script>

  <!-- STYLES -->
  <link href="/style.css" rel="stylesheet">

  <style>
    body {
      height: 100vh;
    }

    .container {
      max-width: 600px;
      border-radius: 10px;
    }

    .form-control {
      min-height: 41px;
    }
  </style>
</head>

<body class="bg-dark">
  <div class="main_wrapper">

    <div class="container bg-light p-4 position-absolute top-50" style="left:50%;transform:translate(-50%, -40%);">
      <div class="alert invis alert-success p-2" style="color: black">üó∏ Correct!</div>
      <div class="alert invis alert-danger p-2" style="color: black">‚òì Incorrect. Try again</div>
      <div class="equation_question" style="color: black"></div>
      <div class="symbol-menu mt-3">
        <button class="btn btn-info symbol-button my-1 text-white" data-bs-toggle="tooltip"
          data-bs-title="Mass">m</button>
        <button class="btn btn-info symbol-button my-1 text-white" data-bs-toggle="tooltip"
          data-bs-title="Work done">W</button>
        <button class="btn btn-info symbol-button my-1 text-white" data-bs-toggle="tooltip"
          data-bs-title="Gravitational field strength">g</button>
        <button class="btn btn-info symbol-button my-1 text-white" data-bs-toggle="tooltip"
          data-bs-title="Distance">d</button>
        <button class="btn btn-info symbol-button my-1 text-white" data-bs-toggle="tooltip"
          data-bs-title="Density">œÅ</button>
        <button class="btn btn-info symbol-button my-1 text-white" data-bs-toggle="tooltip"
          data-bs-title="Pressure/Power">P</button>
        <button class="btn btn-info symbol-button my-1 text-white" data-bs-toggle="tooltip"
          data-bs-title="Area">A</button>
        <button class="btn btn-info symbol-button my-1 text-white" data-bs-toggle="tooltip"
          data-bs-title="Resistance">R</button>
        <button class="btn btn-info symbol-button my-1 text-white" data-bs-toggle="tooltip"
          data-bs-title="Energy">E</button>
        <button class="btn btn-info symbol-button my-1 text-white" data-bs-toggle="tooltip"
          data-bs-title="Moment">M</button>
        <button class="btn btn-info symbol-button my-1 text-white" data-bs-toggle="tooltip"
          data-bs-title="Potential Difference">V</button>
        <button class="btn btn-info symbol-button my-1 text-white" data-bs-toggle="tooltip"
          data-bs-title="Height">h</button>
        <button class="btn btn-info symbol-button my-1 text-white" data-bs-toggle="tooltip"
          data-bs-title="Current">Q</button>
        <button class="btn btn-info symbol-button my-1 text-white" data-bs-toggle="tooltip"
          data-bs-title="Gravitational potential energy">E‚Çö</button>
        <button class="btn btn-info symbol-button my-1 text-white" data-bs-toggle="tooltip"
          data-bs-title="Force">F</button>
        <button class="btn btn-info symbol-button my-1 text-white" data-bs-toggle="tooltip"
          data-bs-title="Displacement">s</button>
        <button class="btn btn-info symbol-button my-1 text-white" data-bs-toggle="tooltip"
          data-bs-title="Acceleration">a</button>
        <button class="btn btn-info symbol-button my-1 text-white" data-bs-toggle="tooltip"
          data-bs-title="Wavelength">Œª</button>
        <button class="btn btn-info symbol-button my-1 text-white" data-bs-toggle="tooltip"
          data-bs-title="Spring constant">k</button>
        <button class="btn btn-info symbol-button my-1 text-white" data-bs-toggle="tooltip"
          data-bs-title="Weight">w</button>
        <button class="btn btn-info symbol-button my-1 text-white" data-bs-toggle="tooltip"
          data-bs-title="Extension">e</button>
        <button class="btn btn-info symbol-button my-1 text-white" data-bs-toggle="tooltip"
          data-bs-title="Momentum">p</button>
        <button class="btn btn-info symbol-button my-1 text-white" data-bs-toggle="tooltip"
          data-bs-title="Current">I</button>
        <button class="btn btn-info symbol-button my-1 text-white" data-bs-toggle="tooltip"
          data-bs-title="Time">t</button>
        <button class="btn btn-info symbol-button my-1 text-white" data-bs-toggle="tooltip"
          data-bs-title="Frequency">f</button>
        <button class="btn btn-info symbol-button my-1 text-white" data-bs-toggle="tooltip"
          data-bs-title="Velocity/Speed/Volume">v</button>
        <button class="btn btn-info symbol-button my-1 text-white" data-bs-toggle="tooltip"
          data-bs-title="Kinetic energy">E‚Çñ</button>
      </div>
      <div class="maths-menu mt-3">
        <button class="btn btn-info text-white maths-button my-1" data-bs-toggle="tooltip"
          data-bs-title="Squared">¬≤</button>
        <button class="btn btn-info text-white maths-button my-1" data-bs-toggle="tooltip"
          data-bs-title="Divided by">√∑</button>
        <button class="btn btn-info text-white maths-button my-1" data-bs-toggle="tooltip"
          data-bs-title="Equals">=</button>
        <button class="btn btn-info text-white maths-button my-1" data-bs-toggle="tooltip"
          data-bs-title="Delta">‚àÜ</button>
        <button class="btn btn-info text-white maths-button my-1" data-bs-toggle="tooltip"
          data-bs-title="Half">¬Ω</button>
      </div>
      <div class="form-control my-3"></div>
      <input type="submit" class="rbtn warning submit_btn">
      <button class="rbtn warning next_btn invis">Next</button>
      <button class="rbtn danger" onclick="clearForm();">Clear</button>
    </div>
  </div>

  <script src="/sidebar.js"></script>
  <script>
    function clearForm() {
      document.querySelector('.form-control').textContent = '';
    }

    document.addEventListener("DOMContentLoaded", function () {
      const tooltipTriggerList = document.querySelectorAll('[data-bs-toggle="tooltip"]')
      const tooltipList = [...tooltipTriggerList].map(tooltipTriggerEl => new bootstrap.Tooltip(tooltipTriggerEl))

      function getParameterByName(name, url) {
        if (!url) url = window.location.href;
        name = name.replace(/[\[\]o]()-=+.$@#%^&*/g, "\\$&");
        var regex = new RegExp("[?&]" + name + "(=([^&#]*)|&|#|$)"), results = regex.exec(url);
        if (!results) return null;
        if (!results[2]) return '';
        return decodeURIComponent(results[2].replace(/\+/g, " "));
      }

      function loadJSON(callback) {
        var jsonFile = getParameterByName('json');
        var xobj = new XMLHttpRequest();
        xobj.overrideMimeType("application/json");
        xobj.open('GET', jsonFile, true);
        xobj.onreadystatechange = () => {
          if (xobj.readyState == 4 && xobj.status == 200) callback(JSON.parse(xobj.responseText));
        };
        xobj.send(null);
      }

      function shuffle(array) {
        for (let i = array.length - 1; i > 0; i--) {
          const j = Math.floor(Math.random() * (i + 1));
          [array[i], array[j]] = [array[j], array[i]];
        }
        return array;
      }

      function displayEquation() {
        const equationObj = shuffled[currentEquationIndex];
        const parts = shuffle(equationObj.parts);
        document.querySelector('.equation_question').textContent = 'State the equation linking ' + parts.join(', ');
      }

      function nextEquation() {
        currentEquationIndex++;
        if (currentEquationIndex >= shuffled.length) {
          currentEquationIndex = 0;
          shuffled = shuffle([...equations]);
        }
        clearForm();
        displayEquation();
      }

      const form = document.querySelector('.form-control');
      const submit = document.querySelector('.submit_btn');
      const next = document.querySelector('.next_btn');
      const success = document.querySelector('.alert-success');
      const danger = document.querySelector('.alert-danger');

      let equations;
      let shuffled;
      let currentEquationIndex = 0;

      document.querySelectorAll('.symbol-button').forEach(sbtn =>
        sbtn.addEventListener('click', () => form.textContent += sbtn.textContent)
      );

      document.querySelectorAll('.maths-button').forEach(mbtn =>
        mbtn.addEventListener('click', () => form.textContent += mbtn.textContent)
      );

      submit.addEventListener('click', () => {
        const correctAnswers = shuffled[currentEquationIndex].equations;

        if (correctAnswers.includes(form.textContent.trim())) {
          next.classList.remove('invis');
          submit.classList.add('invis');
          success.classList.remove('invis');
        } else {
          danger.classList.remove('invis');
          clearForm();
          setTimeout(() => danger.classList.add('invis'), 5000);
        }
      });


      next.addEventListener('click', () => {
        submit.classList.remove('invis');
        next.classList.add('invis');
        success.classList.add('invis');
        nextEquation();
      });

      loadJSON(response => {
        equations = response;
        shuffled = shuffle([...equations]);
        displayEquation();
      });
    });
  </script>
</body>

</html>
